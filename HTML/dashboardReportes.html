<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <title>Inicio - Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="stylesheet" href="../CSS/style.css">
  <style>
    .encabezado-pdf {
      text-align: center;
      margin-bottom: 20px;
    }
    .encabezado-pdf img {
      max-width: 100px;
      margin-bottom: 10px;
    }
    .encabezado-pdf h4 {
      margin: 0;
      font-weight: bold;
    }
    .encabezado-pdf small {
      font-style: italic;
      color: #555;
    }
  </style>
</head>

<body>
  <!-- Menú  -->
  <nav class="navbar navbar-expand-lg navbar-custom">
    <div class="container">
      <a class="navbar-brand d-flex align-items-center" href="index.html">
        <img src="../IMG/logo.png" alt="Logo" class="logo" />
      </a>
      <div class="collapse navbar-collapse" id="menuPrincipal">
        <ul class="navbar-nav ms-auto mb-2 mb-lg-0 align-items-center">
            <li class="nav-item"><a class="nav-link" href="clientes.html">Clientes</a></li>
            <li class="nav-item"><a class="nav-link" href="empleados.html">Empleados</a></li>
            <li class="nav-item"><a class="nav-link" href="inventario.html">Inventario</a></li>
            <li class="nav-item"><a class="nav-link" href="entregas.html">Entregas</a></li>
            <li class="nav-item"><a class="nav-link" href="proveedores.html">Proveedores</a></li>
            <li class="nav-item"><a class="nav-link" href="dashboardReportes.html">Reportes</a></li>
            <li class="nav-item">
                        <a href="registro.html" class="btn btn-login ms-3">
                            <i class="fas fa-user"></i> Registrar Usuario
                        </a>              
                        <a href="login.html" class="btn btn-danger ms-2">
                            <i class="fas fa-sign-out-alt"></i>
                        </a>
            </li>
        </ul>
    </div>
    </div>
  </nav>

  

  <div class="container mt-3 mb-5">
    <h2 class="mb-4 fw-bold text-center">Dashboard y Reportes</h2>

    <!-- Métricas -->
    <div class="row g-4 text-white">
      <div class="col-md-3">
        <div class="card bg-success shadow-sm text-center p-3">
          <i class="fas fa-dollar-sign fa-2x mb-2"></i>
          <h6>Ventas Totales</h6>
          <h4>$25,410</h4>
        </div>
      </div>
      <div class="col-md-3">
        <div class="card bg-primary shadow-sm text-center p-3">
          <i class="fas fa-users fa-2x mb-2"></i>
          <h6>Clientes</h6>
          <h4>4,890</h4>
        </div>
      </div>
      <div class="col-md-3">
        <div class="card bg-warning text-dark shadow-sm text-center p-3">
          <i class="fas fa-box fa-2x mb-2"></i>
          <h6>Pedidos</h6>
          <h4>201</h4>
        </div>
      </div>
      <div class="col-md-3">
        <div class="card bg-info text-dark shadow-sm text-center p-3">
          <i class="fas fa-industry fa-2x mb-2"></i>
          <h6>Proveedores</h6>
          <h4>36</h4>
        </div>
      </div>
    </div>

    <!-- Gráficos -->
    <div class="row g-4 mt-4">
      <div class="col-md-6">
        <div class="card shadow-sm p-3">
          <h5 class="mb-3">Top 5 Productos Más Vendidos</h5>
          <div class="chart-container">
            <canvas id="barChart"></canvas>
          </div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="card shadow-sm p-3">
          <h5 class="mb-3">Clientes Frecuentes por Provincia</h5>
          <div class="chart-container">
            <canvas id="donutChart"></canvas>
          </div>
        </div>
      </div>
    </div>

    <!-- Tablas -->
    <div class="row g-4 mt-4">
      <div class="col-md-6" id="reporteEntregas">
        <div class="card shadow-sm p-3">
          <h5 class="mb-3">Entregas Pendientes</h5>
          <table class="table align-middle text-center">
            <thead class="table-warning">
              <tr>
                <th><i class="fas fa-user"></i> Cliente</th>
                <th><i class="fas fa-box"></i> Producto</th>
                <th><i class="fas fa-calendar-alt"></i> Fecha</th>
                <th><i class="fas fa-clock"></i> Estado</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Industrias Repuestos</td>
                <td>Disco Corte 7"</td>
                <td>12/07/2025</td>
                <td><span class="badge bg-warning text-dark"><i class="fas fa-hourglass-half me-1"></i>Pendiente</span></td>
              </tr>
              <tr>
                <td>Herramientas CR</td>
                <td>Lija Grano 60</td>
                <td>13/07/2025</td>
                <td><span class="badge bg-warning text-dark"><i class="fas fa-hourglass-half me-1"></i>Pendiente</span></td>
              </tr>
              <tr>
                <td>Taller Sánchez</td>
                <td>Disco Flap</td>
                <td>15/07/2025</td>
                <td><span class="badge bg-warning text-dark"><i class="fas fa-hourglass-half me-1"></i>Pendiente</span></td>
              </tr>
            </tbody>
          </table>
          <button class="btn btn-outline-secondary me-2" onclick="descargarPorId('reporteEntregas', 'entregas_pendientes.pdf', 'Entregas Pendientes')">
            <i class="fas fa-download me-1"></i> Entregas Pendientes
          </button>
        </div>
      </div>

      <div class="col-md-6" id="reporteProveedores">
        <div class="card shadow-sm p-3">
          <h5 class="mb-3">Top Proveedores</h5>
          <table class="table table-bordered table-sm align-middle">
            <thead class="table-success text-center">
              <tr>
                <th>Proveedor</th>
                <th>Calificación</th>
                <th>Último Pedido</th>
              </tr>
            </thead>
            <tbody class="text-center">
              <tr>
                <td>Proveeduría Delta</td>
                <td>
                  <i class="fas fa-star text-warning"></i>
                  <i class="fas fa-star text-warning"></i>
                  <i class="fas fa-star text-warning"></i>
                  <i class="fas fa-star text-warning"></i>
                  <i class="fas fa-star text-warning"></i>
                </td>
                <td>05/07/2025</td>
              </tr>
              <tr>
                <td>DiscoPlus S.A.</td>
                <td>
                  <i class="fas fa-star text-warning"></i>
                  <i class="fas fa-star text-warning"></i>
                  <i class="fas fa-star text-warning"></i>
                  <i class="fas fa-star text-warning"></i>
                  <i class="fas fa-star-half-alt text-warning"></i>
                </td>
                <td>03/07/2025</td>
              </tr>
              <tr>
                <td>Lijas Pro</td>
                <td>
                  <i class="fas fa-star text-warning"></i>
                  <i class="fas fa-star text-warning"></i>
                  <i class="fas fa-star text-warning"></i>
                  <i class="fas fa-star text-warning"></i>
                  <i class="far fa-star text-warning"></i>
                </td>
                <td>01/07/2025</td>
              </tr>
              <tr>
                <td>Abrasivos Tico</td>
                <td>
                  <i class="fas fa-star text-warning"></i>
                  <i class="fas fa-star text-warning"></i>
                  <i class="fas fa-star text-warning"></i>
                  <i class="fas fa-star-half-alt text-warning"></i>
                  <i class="far fa-star text-warning"></i>
                </td>
                <td>28/06/2025</td>
              </tr>
            </tbody>
          </table>
          <button class="btn btn-outline-secondary" onclick="descargarPorId('reporteProveedores', 'top_proveedores.pdf', 'Top Proveedores')">
            <i class="fas fa-download me-1"></i> Top Proveedores
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="footer-custom mt-auto py-4">
    <div class="container text-center">
      <p class="mb-1 fw-bold">Abrasivos Industriales S.A.</p>
      <p class="mb-0 small">© 2025 Todos los derechos reservados</p>
    </div>
  </footer>

  <!-- Scripts -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <script>
    function descargarPorId(idElemento, nombreArchivo, tituloReporte) {
      const contenido = document.getElementById(idElemento).cloneNode(true);
      const wrapper = document.createElement('div');

      const encabezado = document.createElement('div');
      encabezado.classList.add('encabezado-pdf');
      encabezado.innerHTML = `
        <img src="/IMG/logo.png" alt="Logo">
        <h4>Abrasivos Industriales S.A.</h4>
        <h5>Reporte: ${tituloReporte}</h5>
        <small>Generado el ${new Date().toLocaleDateString()}</small>
      `;

      wrapper.appendChild(encabezado);
      wrapper.appendChild(contenido);

      const opciones = {
        margin: 0.5,
        filename: nombreArchivo,
        image: { type: 'jpeg', quality: 0.98 },
        html2canvas: { scale: 2 },
        jsPDF: { unit: 'in', format: 'letter', orientation: 'portrait' }
      };
      html2pdf().set(opciones).from(wrapper).save();
    }
  </script>
  <script>
    new Chart(document.getElementById('barChart'), {
      type: 'bar',
      data: {
        labels: ['Lija 80', 'Disco Corte', 'Lija Agua', 'Disco Flap', 'Lija Banda'],
        datasets: [{
          label: 'Unidades Vendidas',
          data: [890, 712, 630, 598, 545],
          backgroundColor: 'rgba(255, 159, 64, 0.7)'
        }]
      },
      options: { responsive: true }
    });

    new Chart(document.getElementById('donutChart'), {
      type: 'doughnut',
      data: {
        labels: ['San José', 'Alajuela', 'Heredia', 'Cartago', 'Puntarenas'],
        datasets: [{
          data: [45, 39, 35, 30, 28],
          backgroundColor: ['#0d6efd', '#198754', '#ffc107', '#dc3545', '#0dcaf0']
        }]
      },
      options: { responsive: true }
    });
  </script>
</body>

</html>
